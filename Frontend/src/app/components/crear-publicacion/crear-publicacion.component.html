<div class="container">
  <div class="crear-publicacion-container">
    <h2>Crear nueva publicación</h2>

    <form [formGroup]="publicacionForm" (ngSubmit)="onSubmit()">

      <label for="titulo">Título:</label>
      <input id="titulo" formControlName="titulo" type="text" />
      <div *ngIf="hasError('titulo', 'required')" class="error">
        El título es obligatorio.
      </div>
      <div *ngIf="hasError('titulo', 'minlength')" class="error">
        El título debe tener al menos 3 caracteres.
      </div>

      <label for="descripcion">Descripción:</label>
      <textarea id="descripcion" formControlName="descripcion"></textarea>
      <div *ngIf="hasError('descripcion', 'required')" class="error">
        La descripción es obligatoria.
      </div>
      <div *ngIf="hasError('descripcion', 'minlength')" class="error">
        La descripción debe tener al menos 10 caracteres.
      </div>

      <label for="media_file">Añadir imagen o video (Máximo 50 MB):</label>
      <input 
        id="media_file" 
        type="file" 
        accept="image/*,video/*" 
        (change)="onFileSelected($event)"
      />
      
      <!-- Preview del archivo seleccionado -->
      <div *ngIf="previewUrl" class="preview-container">
        <div *ngIf="publicacionForm.value.tipo_media === 'imagen'">
          <img [src]="previewUrl" alt="Preview" style="max-width: 300px; max-height: 200px;" />
        </div>
        <div *ngIf="publicacionForm.value.tipo_media === 'video'">
          <video [src]="previewUrl" controls style="max-width: 300px; max-height: 200px;"></video>
        </div>
        <button type="button" (click)="removeFile()" class="remove-file-btn">
          Eliminar archivo
        </button>
      </div>

      <button type="submit">Crear publicación</button>

    </form>
  </div>
</div>
